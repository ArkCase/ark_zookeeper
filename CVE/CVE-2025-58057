#!/bin/bash

set -euo pipefail
. /.functions

ARTIFACT_IDS=(
	io.netty:netty-buffer@LIB_DIR
	io.netty:netty-codec@LIB_DIR
	io.netty:netty-codec-http@LIB_DIR
	io.netty:netty-codec-mqtt@LIB_DIR
	io.netty:netty-codec-socks@LIB_DIR
	io.netty:netty-common@LIB_DIR
	io.netty:netty-handler@LIB_DIR
	io.netty:netty-handler-proxy@LIB_DIR
	io.netty:netty-resolver@LIB_DIR
	io.netty:netty-transport@LIB_DIR
	io.netty:netty-transport-classes-epoll@LIB_DIR
	io.netty:netty-transport-classes-kqueue@LIB_DIR
	io.netty:netty-transport-native-epoll@LIB_DIR
	io.netty:netty-transport-native-kqueue@LIB_DIR
	io.netty:netty-transport-native-unix-common@LIB_DIR
)

set_or_default BASE_DIR "/app"
set_or_default HOME_DIR "${BASE_DIR}/artemis"

export LIB_DIR="${HOME_DIR}/lib"
exec fix-jars "CVE-2025-58057" "4.1.127.Final" "${ARTIFACT_IDS[@]}"
