#!/bin/bash

set -euo pipefail
. /.functions

ARTIFACT_IDS=(
	io.netty:netty-buffer@HOME_LIB_DIR
	io.netty:netty-codec@HOME_LIB_DIR
	io.netty:netty-codec-http@HOME_LIB_DIR
	io.netty:netty-codec-mqtt@HOME_LIB_DIR
	io.netty:netty-codec-socks@HOME_LIB_DIR
	io.netty:netty-common@HOME_LIB_DIR
	io.netty:netty-handler@HOME_LIB_DIR
	io.netty:netty-handler-proxy@HOME_LIB_DIR
	io.netty:netty-resolver@HOME_LIB_DIR
	io.netty:netty-transport@HOME_LIB_DIR
	io.netty:netty-transport-classes-epoll@HOME_LIB_DIR
	io.netty:netty-transport-classes-kqueue@HOME_LIB_DIR
	io.netty:netty-transport-native-epoll@HOME_LIB_DIR
	io.netty:netty-transport-native-kqueue@HOME_LIB_DIR
	io.netty:netty-transport-native-unix-common@HOME_LIB_DIR
)

set_or_default BASE_DIR "/app"
set_or_default HOME_DIR "${BASE_DIR}/zookeeper"
set_or_default HOME_LIB_DIR "${HOME_DIR}/lib"

export HOME_LIB_DIR
exec fix-jars "CVE-2025-67735" "4.1.129.Final" "${ARTIFACT_IDS[@]}"
